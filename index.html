<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Consulta de Notas por CPF</title>
    <!-- Carrega o Tailwind CSS para estilização rápida e responsiva -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Configuração do Tailwind para usar a fonte Inter e cores customizadas -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6; /* Cinza claro de fundo */
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

    <div class="w-full max-w-lg bg-white shadow-2xl rounded-xl p-8 space-y-6">
        <header class="text-center">
            <h1 class="text-3xl font-bold text-gray-800">Consulta de Desempenho Escolar</h1>
            <p class="text-gray-500 mt-2">Mestre Leal, digite seu CPF para verificar sua situação e média.</p>
        </header>

        <!-- Formulário de Consulta -->
        <div class="space-y-4">
            <label for="cpfInput" class="block text-sm font-medium text-gray-700">CPF do Aluno (Apenas números)</label>
            <input
                type="text"
                id="cpfInput"
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 text-lg transition duration-150"
                placeholder="Ex: 90817281568"
                maxlength="14"
                oninput="formatCPF(this)"
            >

            <button
                onclick="searchStudent()"
                class="w-full bg-indigo-600 text-white font-semibold py-3 rounded-lg hover:bg-indigo-700 transition duration-300 shadow-md hover:shadow-lg focus:outline-none focus:ring-4 focus:ring-indigo-500 focus:ring-opacity-50"
            >
                Consultar Dados
            </button>
        </div>

        <!-- Área de Resultados -->
        <div id="resultsArea" class="hidden mt-6">
            <h2 class="text-xl font-semibold mb-3 text-gray-800 border-b pb-2">Resultado da Consulta:</h2>
            <div id="resultCard" class="p-5 rounded-xl shadow-inner transition-all duration-300">
                <!-- Detalhes do aluno serão injetados aqui -->
            </div>
        </div>

        <!-- Área de Mensagens de Erro/Alerta -->
        <div id="messageArea" class="hidden p-4 rounded-lg text-center font-medium">
            <!-- Mensagens de erro/não encontrado serão injetadas aqui -->
        </div>

    </div>

    <script>
        // Dados dos alunos, extraídos do seu CSV e formatados para consulta.
        // O CPF deve ser armazenado limpo (apenas números) para facilitar a comparação.
        const studentData = [
            // Dados fornecidos por Mestre Leal
            { nome: 'WASHINGTON LEAL', cpf: '90817281568', media: 9.0, resultado: 'APROVADO' },
            { nome: 'PIETRO LEAL', cpf: '90817281569', media: 9.5, resultado: 'APROVADO' },
            { nome: 'ZEFERINA REGO', cpf: '90817281570', media: 5.0, resultado: 'REPROVADO' },

            // Exemplos adicionais para demonstração
            { nome: 'ANA SILVA', cpf: '12345678901', media: 8.2, resultado: 'APROVADO' },
            { nome: 'BRUNO COSTA', cpf: '11223344556', media: 4.8, resultado: 'REPROVADO' },
            { nome: 'CARLA GOMES', cpf: '00011122233', media: 6.0, resultado: 'APROVADO' },
            { nome: 'DAVID ROCHA', cpf: '99988877766', media: 5.9, resultado: 'REPROVADO' },
        ];

        const resultsArea = document.getElementById('resultsArea');
        const resultCard = document.getElementById('resultCard');
        const messageArea = document.getElementById('messageArea');

        // Função para formatar o CPF com pontos e traço no input (apenas visual)
        function formatCPF(input) {
            let value = input.value.replace(/\D/g, ''); // Remove tudo que não é dígito
            if (value.length > 11) value = value.substring(0, 11);

            // Aplica a máscara de CPF: 999.999.999-99
            if (value.length > 9) {
                value = value.replace(/^(\d{3})(\d{3})(\d{3})(\d{2})$/, '$1.$2.$3-$4');
            } else if (value.length > 6) {
                value = value.replace(/^(\d{3})(\d{3})(\d{3})$/, '$1.$2.$3');
            } else if (value.length > 3) {
                value = value.replace(/^(\d{3})(\d{3})$/, '$1.$2');
            } else if (value.length > 0) {
                value = value.replace(/^(\d{3})$/, '$1');
            }

            input.value = value;
        }

        // Função principal para buscar o aluno
        function searchStudent() {
            const cpfInput = document.getElementById('cpfInput');
            // Remove a máscara (pontos e traços) e espaços para a busca
            const cleanedCpf = cpfInput.value.replace(/[^\d]/g, '').trim();

            // Limpa as áreas de resultado e mensagem
            resultsArea.classList.add('hidden');
            messageArea.classList.add('hidden');
            resultCard.innerHTML = '';
            messageArea.innerHTML = '';

            if (cleanedCpf.length !== 11) {
                showMessage('Por favor, digite um CPF válido com 11 dígitos.', 'bg-yellow-100 text-yellow-800 border-yellow-300');
                return;
            }

            // Procura o aluno na lista de dados
            const student = studentData.find(s => s.cpf === cleanedCpf);

            if (student) {
                displayResults(student);
            } else {
                showMessage('CPF não encontrado. Verifique se o número está correto.', 'bg-red-100 text-red-800 border-red-300');
            }
        }

        // Função para exibir mensagens de erro/alerta
        function showMessage(message, classes) {
            messageArea.innerHTML = `<p>${message}</p>`;
            messageArea.className = `p-4 rounded-lg text-center font-medium border ${classes}`;
            messageArea.classList.remove('hidden');
        }

        // Função para exibir os dados do aluno encontrado
        function displayResults(student) {
            const isApproved = student.resultado === 'APROVADO';

            // Define as cores e ícones com base no resultado
            const statusColor = isApproved ? 'bg-green-600' : 'bg-red-600';
            const cardClasses = isApproved ? 'border-green-400 bg-green-50' : 'border-red-400 bg-red-50';
            const icon = isApproved ? '✅' : '❌';

            // Atualiza o estilo do card de resultado
            resultCard.className = `p-5 rounded-xl shadow-xl transition-all duration-300 border-2 ${cardClasses}`;

            // Conteúdo HTML do cartão de resultado
            resultCard.innerHTML = `
                <div class="space-y-4">
                    <p class="text-xl font-bold text-gray-900 uppercase">${student.nome}</p>

                    <div class="flex items-center space-x-3 p-3 rounded-lg ${statusColor} text-white shadow-lg">
                        <span class="text-2xl">${icon}</span>
                        <span class="text-xl font-semibold">Situação: ${student.resultado}</span>
                    </div>

                    <div class="grid grid-cols-2 gap-4 text-gray-700">
                        <div>
                            <p class="text-sm font-medium text-gray-500">CPF (limpo)</p>
                            <p class="text-lg font-semibold">${student.cpf}</p>
                        </div>
                        <div>
                            <p class="text-sm font-medium text-gray-500">Média Final</p>
                            <p class="text-lg font-semibold">${student.media.toFixed(1)}</p>
                        </div>
                    </div>
                </div>
            `;
            resultsArea.classList.remove('hidden');
        }

        // Inicializa o Listener para a tecla Enter no campo de CPF
        document.getElementById('cpfInput').addEventListener('keypress', function(event) {
            if (event.key === 'Enter') {
                event.preventDefault(); // Impede o envio do formulário padrão
                searchStudent();
            }
        });

    </script>

</body>
</html>
